<!DOCTYPE html>
<html lang="ko"xmlns:th="http://www.thymeleaf.org">

	<head th:replace="~{adm/infra/include/head :: head}"></head>

	<body>

		<!-- Page wrapper start -->
		<div class="page-wrapper">
			
			<!--헤더 블록 -->
			<header>
				<div th:replace="~{adm/infra/include/header :: header}"></div>
			</header>

			<!-- Main container start -->
			<div class="main-container">

				<!-- nav 블록 -->
				<nav class="sidebar-wrapper">
					<div th:replace="~{adm/infra/include/nav :: nav}"></div>					
				</nav>

				<!-- Content wrapper scroll start -->
				<div class="content-wrapper-scroll">

					<!-- Main header starts -->
					<div class="main-header d-flex align-s-center justify-content-between position-relative">
						<div class="d-flex align-items-center justify-content-center">
							<div class="page-icon">
<!-- 								<i class="bi bi-window-split"></i> -->
							</div>
<!-- 							<div class="page-title d-none d-md-block"> -->
<!-- 								<h5>Tables</h5> -->
<!-- 							</div> -->
						</div>
						<!-- Live updates start -->
						<ul class="updates d-flex align-items-end flex-column overflow-hidden" id="updates">
							<li>
								<a href="javascript:void(0)">
									<i class="bi bi-envelope-paper text-red font-1x me-2"></i>
									<span>12 emails from David Michaiah.</span>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<i class="bi bi-bar-chart text-blue font-1x me-2"></i>
									<span>15 new features updated successfully.</span>
								</a>
							</li>
							<li>
								<a href="javascript:void(0)">
									<i class="bi bi-folder-check text-yellow font-1x me-2"></i>
									<span>The media folder is created successfully.</span>
								</a>
							</li>
						</ul>
						<!-- Live updates end -->
					</div>
					<!-- Main header ends -->

					<!-- Content wrapper start -->
					<div class="content-wrapper">
						<!-- Row start -->
						<div class="row gx-3">
							<div class="col-sm-12 col-12">
								<div class="card">
									<div class="card-body">
										<div class="card-header">
											<div class="card-title">출고 관리</div>
										</div>
									<form method="post" action="exitsInsert">
										<div class="row">
											<div class="col-lg-6 col-sm-4 col-12 gy-2">
											  		<label class="form-label">주문 seq</label>
											  		<select id="orderProductSeq" name="orderProductSeq" class="form-select col-md-6" >
											  			<option value="">주문seq을 선택하세요</option>
														<option th:if="${#lists.isEmpty(oList)}" th:each="olist : ${olist}" th:text="${olist.orderProductSeq}" th:value="${olist.orderProductSeq}"></option>
													</select>
											 </div>
										</div>
										<div class="row">
											<div id="selectOrder" class="col-lg-6 col-sm-4 col-12 gy-2">
													
											</div>
											<div id="selectProduct" class="col-lg-6 col-sm-4 col-12 gy-2">
													
											</div>

											 <div class="col-lg-6 col-sm-4 col-12 gy-2">
										  		<label class="form-label">상품 수량</label>
										  		<input type="text" name="exitsAccount" id="exitsAccount" class="form-control">
										  		<div id="exitsAccountFeedback" class="invalid-feedback"></div>
										  	</div>
										  	
										  	<div class="col-lg-6 col-sm-4 col-12 gy-2">
												  
										 	</div>
										 	
										  	<div class="col-lg-6 col-sm-4 col-12 gy-2">
										  		<label class="form-label">택배사</label>
										  		<select id="delivaryNameCd" name="delivaryNameCd" class="form-select">
														<option value="">택배사를 선택하세요</option>
														<option th:each="list : ${@codeService.selectListCachedCode(6)}" th:value="${list.codeSeq}" th:text="${list.codeName}"
														th:selected="${list.codeSeq} == ${item?.delivaryNameCd}"></option>
												</select>
										  	</div>
										  	<div class="col-lg-6 col-sm-4 col-12 gy-2">
										  		<label class="form-label">택배원</label>
										  		<input type="text" name="deliverName" id="deliverName" class="form-control">
										  	</div>
										  	<div class="col-lg-6 col-sm-4 col-12 gy-2">
										  		<label class="form-label">송장번호</label>
										  		<input type="text" name="delivaryNumber" id="delivaryNumber" class="form-control">
										  	</div>
										  	<div class="col-lg-6 col-sm-4 col-12 gy-2">
										  		<label class="form-label">배송상태</label>
										  		<select id="delivaryStatusCd" name="delivaryStatusCd" class="form-select">
														<option value="">배송상태를 선택하세요</option>
														<option th:each="list : ${@codeService.selectListCachedCode(2)}" th:value="${list.codeSeq}" th:text="${list.codeName}"
														th:selected="${list.codeSeq} == ${item?.delivaryStatusCd}"></option>
												</select>
										  	</div>
										
										</div>
											 
										  	<div class="d-flex justify-content-between mt-4">
											  	<div class="" align="left">
											  		<button type="submit" class="btn btn-primary"><a th:href="@{/exitsXdmList}" th:text="뒤로가기"></a></button>
											  	</div>
											  	
											  	<div class="" align="right">
											  		<button type="submit" id="btnSubmit" class="btn btn-primary">저장</button>
											  	</div>
										  	</div>
										  </div>
  										</form>
									</div>
								</div>
										  
									</div>
								</div>
							</div>
						</div>
							
						<!-- Row end -->

					</div>
					<!-- Content wrapper end -->

				</div>
				<!-- Content wrapper scroll end -->

				<!-- App Footer start -->
				<div class="app-footer">
					<span>© Gear admin 2023</span>
				</div>
				<!-- App footer end -->

			</div>
			<!-- Main container end -->

		</div>
		<!-- Page wrapper end -->

		<!-- *************
			************ Required JavaScript Files *************
		************* -->
		<!-- Required jQuery first, then Bootstrap Bundle JS -->
		<!--<script src="/adm/template/gear/assets/js/jquery.min.js"></script> -->
		<script src="/adm/template/gear/assets/js/bootstrap.bundle.min.js"></script>
		<script src="/adm/template/gear/assets/js/modernizr.js"></script>
		<script src="/adm/template/gear/assets/js/moment.js"></script>

		<!-- *************
			************ Vendor Js Files *************
		************* -->

		<!-- Overlay Scroll JS -->
		<script src="/adm/template/gear/assets/vendor/overlay-scroll/jquery.overlayScrollbars.min.js"></script>
		<script src="/adm/template/gear/assets/vendor/overlay-scroll/custom-scrollbar.js"></script>

		<!-- News ticker -->
		<script src="/adm/template/gear/assets/vendor/newsticker/newsTicker.min.js"></script>
		<script src="/adm/template/gear/assets/vendor/newsticker/custom-newsTicker.js"></script>

		<!-- Main Js Required -->
		<script src="/adm/template/gear/assets/js/main.js"></script>
		
		<!-- Data Tables -->
		<script src="/adm/template/gear/assets/vendor/datatables/dataTables.min.js"></script>
	
	<script type="text/javascript">
	
	let goUrlXdmList = "/codeGroupXdmList";
	let goUrlXdmLogin = "/codeGroupLogin";
	let goUrlXdmForm = "/codeGroupForm";
	let goUrlXdmUpdt = "/codeGroupUpdt";
	let goUrlXdmInsert = "/codeGroupInsert";								/* ### */
	let goUrlXdmMultiUele = "/codeGroupXdmMultiUele";			/* ### */
	let goUrlXdmMultiDele = "/codeGroupXdmMultiDele";			/* ### */
	let goUrlXdmView = "/codeGroupAdmView";
	
	
	document.getElementById("btnSubmit").onclick = function () {
		if(validationInsert() == false){
			return false;
		} else { 
			form.submit();
		}
		
		
// 		validationInsert();
// 		if(seq.value == "0" || seq.value == ""){
// 			if(validationInsert() == false) return false;
// 			form.action = goUrlXdmInsert;
// 			form.submit();
// 		} else {
// 			if(validationUpdt() == false) return false;
// 			form.action = goUrlXdmUpdt;
// 			form.submit();
// 		}
	}
	
	function validationInsert(){
		if(validationUpdt() == false) return false;
// 		validationUpdt();
// 		alert("validationInsert");
	}
	
	function validationUpdt(){
		if(!checkOnlyNumberH('exitsAccount', 2, 0, "숫자만 입력 가능합니다.")) return false;
	
	}
		
// 		alert("validationUpdt");
// 		alert("cgName : "+document.getElementById("cgName").value);	
	
	
	nullToEmpty = function(value){
		if(value == null || value == 'null' || value.length == 0){
			return false;
		} else {
			return true;
		}
	}
	
	// 셀렉문 데이터 뿌려주기 아작스
    function selectTitle() {
    
        $.ajax({
            async: true 
            ,cache: false
            ,type: "post"
            /* ,dataType:"json" */
            ,url: "/orderSelect"
            /* ,data : $("#formLogin").serialize() */
            ,data : {"orderProductSeq" : $("#orderProductSeq").val()}
            // , "autoLogin" : $("#autoLogin").is(":checked")
            
            ,success: function(response) {
				alert("1");
                if(response.rt == "success") {
						alert("2");						
                    $("#selectOrder").html(
							 '	<label class="form-label">주문자</label>' 
	                        +    '	<input type="hidden" name="orderSeqF" id="orderSeqF" value="' + response.itemOd.orderSeqF + '"  class="form-control" />' 
	                        +    '	<input type="text" name="memberName" value="' + response.itemOd.memberName + '"   class="form-control" />'
                    );
                    $("#selectProduct").html(
                            '	<label class="form-label">상품이름</label>' 
	                        +    '	<input type="hidden" name="productSeqF" id="productSeqF" value="' + response.itemOd.productSeqF + '"  class="form-control" />' 
	                        +    '	<input type="text" name="productName" value="' + response.itemOd.productName + '"   class="form-control" />'
                    );
                } else {
                    alert("주소가 일치하지 않습니다");
                }
            }
            ,error : function(jqXHR, textStatus, errorThrown){
                alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
            }
        });
    }        


    document.getElementById("orderProductSeq").onchange = function () {
        selectTitle();
    }
	
	
	
	</script>
	
	</body>

</html>